/**
 * almond 0.2.0 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @license RequireJS text 2.0.3 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

(function(){var e,t,n;(function(r){function i(e,t){var n,r,i,o,a,s,c,l,u,d,f=t&&t.split("/"),v=b.map,p=v&&v["*"]||{};if(e&&"."===e.charAt(0)&&t){for(f=f.slice(0,f.length-1),e=f.concat(e.split("/")),l=0;e.length>l;l+=1)if(d=e[l],"."===d)e.splice(l,1),l-=1;else if(".."===d){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}if((f||p)&&v){for(n=e.split("/"),l=n.length;l>0;l-=1){if(r=n.slice(0,l).join("/"),f)for(u=f.length;u>0;u-=1)if(i=v[f.slice(0,u).join("/")],i&&(i=i[r])){o=i,a=l;break}if(o)break;!s&&p&&p[r]&&(s=p[r],c=l)}!o&&s&&(o=s,a=c),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function o(e,t){return function(){return v.apply(r,y.call(arguments,0).concat([e,t]))}}function a(e){return function(t){return i(t,e)}}function s(e){return function(t){m[e]=t}}function c(e){if(h.hasOwnProperty(e)){var t=h[e];delete h[e],w[e]=!0,f.apply(r,t)}if(!m.hasOwnProperty(e)&&!w.hasOwnProperty(e))throw Error("No "+e);return m[e]}function l(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(t,n,r){e.onResourceLoad&&t&&e.onResourceLoad({defined:n},{id:t},r)}function d(e){return function(){return b&&b.config&&b.config[e]||{}}}var f,v,p,g,m={},h={},b={},w={},y=[].slice;p=function(e,t){var n,r=l(e),o=r[0];return e=r[1],o&&(o=i(o,t),n=c(o)),o?e=n&&n.normalize?n.normalize(e,a(t)):i(e,t):(e=i(e,t),r=l(e),o=r[0],e=r[1],o&&(n=c(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},g={require:function(e){return o(e)},exports:function(e){var t=m[e];return t!==void 0?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:d(e)}}},f=function(e,t,n,i){var a,l,d,f,v,b,y=[];if(i=i||e,"function"==typeof n){for(t=!t.length&&n.length?["require","exports","module"]:t,v=0;t.length>v;v+=1)if(f=p(t[v],i),l=f.f,"require"===l)y[v]=g.require(e);else if("exports"===l)y[v]=g.exports(e),b=!0;else if("module"===l)a=y[v]=g.module(e);else if(m.hasOwnProperty(l)||h.hasOwnProperty(l)||w.hasOwnProperty(l))y[v]=c(l);else{if(!f.p)throw Error(e+" missing "+l);f.p.load(f.n,o(i,!0),s(l),{}),y[v]=m[l]}d=n.apply(m[e],y),e&&(a&&a.exports!==r&&a.exports!==m[e]?m[e]=a.exports:d===r&&b||(m[e]=d))}else e&&(m[e]=n);u(e,m,y)},e=t=v=function(e,t,n,i,o){return"string"==typeof e?g[e]?g[e](t):c(p(e,t).f):(e.splice||(b=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},"function"==typeof n&&(n=i,i=o),i?f(r,e,t,n):setTimeout(function(){f(r,e,t,n)},15),v)},v.config=function(e){return b=e,v},n=function(e,t,n){t.splice||(n=t,t=[]),h[e]=[e,t,n]},n.amd={jQuery:!0}})(),n("durandal/amd/almond-custom",function(){}),n("config",[],function(){toastr.options.timeOut=4e3,toastr.options.positionClass="toast-bottom-right";var e={imageBasePath:"../content/images/users/",unknownDriverImageSource:"unknown_person.jpg"},t="api/tripdata",n=[{url:"trip",moduleId:"viewmodels/trip",name:"Enter trip",visible:!0,caption:"Trip"},{url:"account/login",moduleId:"viewmodels/account/login",name:"Login",visible:!1,caption:"Login"},{url:"account/register",moduleId:"viewmodels/account/register",name:"Register",visible:!1,caption:"Register"},{url:"settings",moduleId:"viewmodels/settings",name:"Settings",visible:!0,caption:"Settings"},{url:"trips",moduleId:"viewmodels/trips",name:"Trips",visible:!0,caption:"Trips"},{url:"drivers",moduleId:"viewmodels/drivers",name:"Drivers",visible:!0,caption:"Drivers"}],r="trip";return{debugEnabled:ko.observable(!0),imageSettings:e,remoteServiceName:t,routes:n,startModule:r}}),n("main-built",function(){}),n("durandal/system",["require"],function(t){var n,r=!1,i=Object.keys,o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,s=!1;if(Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}catch(c){s=!0}e.onResourceLoad=function(e,t){n.setModuleId(e.defined[t.id],t.id)};var l=function(){},u=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var e=0;arguments.length>e;)console.log("Item "+(e+1)+": "+arguments[e]),e++;else 1==Array.prototype.slice.call(arguments).length&&"string"==typeof Array.prototype.slice.call(arguments)[0]?console.log(""+Array.prototype.slice.call(arguments)):console.log(Array.prototype.slice.call(arguments));else Function.prototype.bind&&!s||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))}catch(t){}};return n={version:"1.1.1",noop:l,getModuleId:function(e){return e?"function"==typeof e?e.prototype.__moduleId__:"string"==typeof e?null:e.__moduleId__:null},setModuleId:function(e,t){return e?"function"==typeof e?(e.prototype.__moduleId__=t,void 0):("string"!=typeof e&&(e.__moduleId__=t),void 0):void 0},debug:function(e){return 1!=arguments.length?r:(r=e,r?(this.log=u,this.log("Debug mode enabled.")):(this.log("Debug mode disabled."),this.log=l),void 0)},isArray:function(e){return"[object Array]"===a.call(e)},log:l,defer:function(e){return $.Deferred(e)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),n="x"==e?t:8|3&t;return n.toString(16)})},acquire:function(){var e=Array.prototype.slice.call(arguments,0);return this.defer(function(n){t(e,function(){var e=arguments;setTimeout(function(){n.resolve.apply(n,e)},1)})}).promise()}},n.keys=i||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)o.call(e,n)&&(t[t.length]=n);return t},n}),n("durandal/viewEngine",["require","./system"],function(e){var t,n=e("./system");return t=$.parseHTML?function(e){return $.parseHTML(e)}:function(e){return $(e).get()},{viewExtension:".html",viewPlugin:"text",isViewUrl:function(e){return-1!==e.indexOf(this.viewExtension,e.length-this.viewExtension.length)},convertViewUrlToViewId:function(e){return e.substring(0,e.length-this.viewExtension.length)},convertViewIdToRequirePath:function(e){return this.viewPlugin+"!"+e+this.viewExtension},parseMarkup:function(e){var n=t(e);if(1==n.length)return n[0];for(var r=[],i=0;n.length>i;i++){var o=n[i];8!=o.nodeType&&r.push(o)}return r.length>1?$(r).wrapAll('<div class="durandal-wrapper"></div').parent().get(0):r[0]},createView:function(e){var t=this,r=this.convertViewIdToRequirePath(e);return n.defer(function(i){n.acquire(r).then(function(n){var r=t.parseMarkup(n);r.setAttribute("data-view",e),i.resolve(r)})}).promise()}}}),n("durandal/viewLocator",["require","./system","./viewEngine"],function(e){function t(e,t){for(var n=0;e.length>n;n++){var r=e[n],i=r.getAttribute("data-view");if(i==t)return r}}function n(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}var r=e("./system"),i=e("./viewEngine");return{useConvention:function(e,t,r){e=e||"viewmodels",t=t||"views",r=r||t;var i=RegExp(n(e),"gi");this.convertModuleIdToViewId=function(e){return e.replace(i,t)},this.translateViewIdToArea=function(e,t){return t&&"partial"!=t?r+"/"+t+"/"+e:r+"/"+e}},locateViewForObject:function(e,t){var n;if(e.getView&&(n=e.getView()))return this.locateView(n,null,t);if(e.viewUrl)return this.locateView(e.viewUrl,null,t);var i=r.getModuleId(e);return i?this.locateView(this.convertModuleIdToViewId(i),null,t):this.locateView(this.determineFallbackViewId(e),null,t)},convertModuleIdToViewId:function(e){return e},determineFallbackViewId:function(e){var t=/function (.{1,})\(/,n=t.exec(""+e.constructor),r=n&&n.length>1?n[1]:"";return"views/"+r},translateViewIdToArea:function(e){return e},locateView:function(e,n,o){if("string"==typeof e){var a;if(a=i.isViewUrl(e)?i.convertViewUrlToViewId(e):e,n&&(a=this.translateViewIdToArea(a,n)),o){var s=t(o,a);if(s)return r.defer(function(e){e.resolve(s)}).promise()}return i.createView(a)}return r.defer(function(t){t.resolve(e)}).promise()}}}),n("durandal/viewModelBinder",["require","./system"],function(e){function t(e,t,r){if(!t||!e)return n.log("Insufficent Information to Bind",t,e),void 0;if(!t.getAttribute)return n.log("Unexpected View Type",t,e),void 0;var i=t.getAttribute("data-view");try{n.log("Binding",i,e),r()}catch(o){n.log(o.message,i,e)}}var n=e("./system");return{bindContext:function(e,n,r){r&&(e=e.createChildContext(r)),t(e,n,function(){ko.applyBindings(e,n),r&&r.setView&&r.setView(n)})},bind:function(e,n){t(e,n,function(){ko.applyBindings(e,n),e.setView&&e.setView(n)})}}}),n("durandal/viewModel",["require","./system"],function(e){function t(e){return void 0==e&&(e={}),e.closeOnDeactivate||(e.closeOnDeactivate=s.defaults.closeOnDeactivate),e.beforeActivate||(e.beforeActivate=s.defaults.beforeActivate),e.afterDeactivate||(e.afterDeactivate=s.defaults.afterDeactivate),e.interpretResponse||(e.interpretResponse=s.defaults.interpretResponse),e.areSameItem||(e.areSameItem=s.defaults.areSameItem),e}function n(e,t,n,r,i){if(e&&e.deactivate){c.log("Deactivating",e);var o;try{o=e.deactivate(t)}catch(a){return c.log(a),r.resolve(!1),void 0}o&&o.then?o.then(function(){n.afterDeactivate(e,t,i),r.resolve(!0)},function(e){c.log(e),r.resolve(!1)}):(n.afterDeactivate(e,t,i),r.resolve(!0))}else e&&n.afterDeactivate(e,t,i),r.resolve(!0)}function r(e,t,n,r){if(e)if(e.activate){c.log("Activating",e);var i;try{i=e.activate(r)}catch(o){return c.log(o),n(!1),void 0}i&&i.then?i.then(function(){t(e),n(!0)},function(e){c.log(e),n(!1)}):(t(e),n(!0))}else t(e),n(!0);else n(!0)}function i(e,t,n){return c.defer(function(r){if(e&&e.canDeactivate){var i;try{i=e.canDeactivate(t)}catch(o){return c.log(o),r.resolve(!1),void 0}i.then?i.then(function(e){r.resolve(n.interpretResponse(e))},function(e){c.log(e),r.resolve(!1)}):r.resolve(n.interpretResponse(i))}else r.resolve(!0)}).promise()}function o(e,t,n,r){return c.defer(function(i){if(e==t())return i.resolve(!0),void 0;if(e&&e.canActivate){var o;try{o=e.canActivate(r)}catch(a){return c.log(a),i.resolve(!1),void 0}o.then?o.then(function(e){i.resolve(n.interpretResponse(e))},function(e){c.log(e),i.resolve(!1)}):i.resolve(n.interpretResponse(o))}else i.resolve(!0)}).promise()}function a(e,a){var s=ko.observable(null);a=t(a);var l=ko.computed({read:function(){return s()},write:function(e){l.viaSetter=!0,l.activateItem(e)}});return l.settings=a,a.activator=l,l.isActivating=ko.observable(!1),l.canDeactivateItem=function(e,t){return i(e,t,a)},l.deactivateItem=function(e,t){return c.defer(function(r){l.canDeactivateItem(e,t).then(function(i){i?n(e,t,a,r,s):(l.notifySubscribers(),r.resolve(!1))})})},l.canActivateItem=function(e,t){return o(e,s,a,t)},l.activateItem=function(e,t){var i=l.viaSetter;return l.viaSetter=!1,c.defer(function(o){if(l.isActivating())return o.resolve(!1),void 0;l.isActivating(!0);var u=s();return a.areSameItem(u,e,t)?(l.isActivating(!1),o.resolve(!0),void 0):(l.canDeactivateItem(u,a.closeOnDeactivate).then(function(d){d?l.canActivateItem(e,t).then(function(d){d?c.defer(function(e){n(u,a.closeOnDeactivate,a,e)}).promise().then(function(){e=a.beforeActivate(e),r(e,s,function(e){l.isActivating(!1),o.resolve(e)},t)}):(i&&l.notifySubscribers(),l.isActivating(!1),o.resolve(!1))}):(i&&l.notifySubscribers(),l.isActivating(!1),o.resolve(!1))}),void 0)}).promise()},l.canActivate=function(){var t;return e?(t=e,e=!1):t=l(),l.canActivateItem(t)},l.activate=function(){var t;return e?(t=e,e=!1):t=l(),l.activateItem(t)},l.canDeactivate=function(e){return l.canDeactivateItem(l(),e)},l.deactivate=function(e){return l.deactivateItem(l(),e)},l.includeIn=function(e){e.canActivate=function(){return l.canActivate()},e.activate=function(){return l.activate()},e.canDeactivate=function(e){return l.canDeactivate(e)},e.deactivate=function(e){return l.deactivate(e)}},a.includeIn?l.includeIn(a.includeIn):e&&l.activate(),l.forItems=function(e){a.closeOnDeactivate=!1,a.determineNextItemToActivate=function(e,t){var n=t-1;return-1==n&&e.length>1?e[1]:n>-1&&e.length-1>n?e[n]:null},a.beforeActivate=function(t){var n=l();if(t){var r=e.indexOf(t);-1==r?e.push(t):t=e()[r]}else t=a.determineNextItemToActivate(e,n?e.indexOf(n):0);return t},a.afterDeactivate=function(t,n){n&&e.remove(t)};var t=l.canDeactivate;l.canDeactivate=function(n){return n?c.defer(function(t){function r(){for(var e=0;o.length>e;e++)if(!o[e])return t.resolve(!1),void 0;t.resolve(!0)}for(var i=e(),o=[],a=0;i.length>a;a++)l.canDeactivateItem(i[a],n).then(function(e){o.push(e),o.length==i.length&&r()})}).promise():t()};var n=l.deactivate;return l.deactivate=function(t){return t?c.defer(function(n){function r(r){l.deactivateItem(r,t).then(function(){o++,e.remove(r),o==a&&n.resolve()})}for(var i=e(),o=0,a=i.length,s=0;a>s;s++)r(i[s])}).promise():n()},l},l}var s,c=e("./system");return s={defaults:{closeOnDeactivate:!0,interpretResponse:function(e){if("string"==typeof e){var t=e.toLowerCase();return"yes"==t||"ok"==t}return e},areSameItem:function(e,t){return e==t},beforeActivate:function(e){return e},afterDeactivate:function(e,t,n){t&&n&&n(null)}},activator:a}}),n("durandal/composition",["require","./viewLocator","./viewModelBinder","./viewEngine","./system","./viewModel"],function(e){function t(e){return e.model&&e.model.activate&&(v.activateDuringComposition&&void 0==e.activate||e.activate)}function n(e,n){t(e)?u.activator().activateItem(e.model).then(function(e){e&&n()}):n()}function r(e){for(var t=[],n={childElements:t,activeView:null},r=ko.virtualElements.firstChild(e);r;)1==r.nodeType&&(t.push(r),r.getAttribute(f)&&(n.activeView=r)),r=ko.virtualElements.nextSibling(r);return n}function i(e,t,n){n.activeView&&n.activeView.removeAttribute(f),t&&(n.model&&n.model.viewAttached&&(n.composingNewView||n.alwaysAttachView)&&n.model.viewAttached(t),t.setAttribute(f,!0)),n.afterCompose&&n.afterCompose(e,t,n)}function o(e,t){if("string"==typeof t.transition&&e){if(t.activeView){if(t.activeView==e)return!1;if(t.skipTransitionOnSameViewId){var n=t.activeView.getAttribute("data-view"),r=e.getAttribute("data-view");return n!=r}return!0}return!0}return!1}var a=e("./viewLocator"),s=e("./viewModelBinder"),c=e("./viewEngine"),l=e("./system"),u=e("./viewModel"),d={},f="data-active-view",v={activateDuringComposition:!1,convertTransitionToModuleId:function(e){return"durandal/transitions/"+e},switchContent:function(e,t,n){if(n.transition=n.transition||this.defaultTransitionName,o(t,n)){var r=this.convertTransitionToModuleId(n.transition);l.acquire(r).then(function(r){n.transition=r,r(e,t,n).then(function(){i(e,t,n)})})}else t!=n.activeView&&(n.cacheViews&&n.activeView&&$(n.activeView).css("display","none"),t?n.cacheViews?n.composingNewView?(n.viewElements.push(t),ko.virtualElements.prepend(e,t)):$(t).css("display",""):(ko.virtualElements.emptyNode(e),ko.virtualElements.prepend(e,t)):n.cacheViews||ko.virtualElements.emptyNode(e)),i(e,t,n)},bindAndShow:function(e,t,r){r.composingNewView=r.cacheViews?-1==ko.utils.arrayIndexOf(r.viewElements,t):!0,n(r,function(){if(r.beforeBind&&r.beforeBind(e,t,r),r.preserveContext&&r.bindingContext)r.composingNewView&&s.bindContext(r.bindingContext,t,r.model);else if(t){var n=r.model||d,i=ko.dataFor(t);if(i!=n){if(!r.composingNewView)return $(t).remove(),c.createView(t.getAttribute("data-view")).then(function(t){v.bindAndShow(e,t,r)}),void 0;s.bind(n,t)}}v.switchContent(e,t,r)})},defaultStrategy:function(e){return a.locateViewForObject(e.model,e.viewElements)},getSettings:function(e){var t={},n=ko.utils.unwrapObservable(e())||{};if("string"==typeof n)return n;var r=l.getModuleId(n);if(r)return{model:n};for(var i in n)if("string"==typeof i){var o=ko.utils.unwrapObservable(n[i]);t[i]=o}return t},executeStrategy:function(e,t){t.strategy(t).then(function(n){v.bindAndShow(e,n,t)})},inject:function(e,t){return t.model?t.view?(a.locateView(t.view,t.area,t.viewElements).then(function(n){v.bindAndShow(e,n,t)}),void 0):((void 0===t.view||t.view)&&(t.strategy||(t.strategy=this.defaultStrategy),"string"==typeof t.strategy?l.acquire(t.strategy).then(function(n){t.strategy=n,v.executeStrategy(e,t)}):this.executeStrategy(e,t)),void 0):(this.bindAndShow(e,null,t),void 0)},compose:function(e,t,n){"string"==typeof t&&(t=c.isViewUrl(t)?{view:t}:{model:t});var i=l.getModuleId(t);i&&(t={model:t});var o=r(e);t.bindingContext=n,t.activeView=o.activeView,t.cacheViews&&!t.viewElements&&(t.viewElements=o.childElements),t.model?"string"==typeof t.model?l.acquire(t.model).then(function(n){t.model="function"==typeof n?new n(e,t):n,v.inject(e,t)}):v.inject(e,t):t.view?(t.area=t.area||"partial",t.preserveContext=!0,a.locateView(t.view,t.area,t.viewElements).then(function(n){v.bindAndShow(e,n,t)})):this.bindAndShow(e,null,t)}};return ko.bindingHandlers.compose={update:function(e,t,n,r,i){var o=v.getSettings(t);v.compose(e,o,i)}},ko.virtualElements.allowedBindings.compose=!0,v}),n("durandal/widget",["require","./system","./composition"],function(e){var t=e("./system"),n=e("./composition"),r="data-part",i="["+r+"]",o={},a={},s={getParts:function(e){var n={};t.isArray(e)||(e=[e]);for(var o=0;e.length>o;o++){var a=e[o];if(a.getAttribute){var s=a.getAttribute(r);s&&(n[s]=a);for(var c=$(i,a),l=0;c.length>l;l++){var u=c.get(l);n[u.getAttribute(r)]=u}}}return n},getSettings:function(e){var t={},n=ko.utils.unwrapObservable(e())||{};if("string"==typeof n)t=n;else for(var r in n)if("string"==typeof r){var i=ko.utils.unwrapObservable(n[r]);t[r]=i}return t},registerKind:function(e){ko.bindingHandlers[e]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,n,r,i,o){var a=s.getSettings(n);a.kind=e,s.create(t,a,o)}},ko.virtualElements.allowedBindings[e]=!0},mapKind:function(e,t,n){t&&(a[e]=t),n&&(o[e]=n)},convertKindToModuleId:function(e){return o[e]||"durandal/widgets/"+e+"/controller"},convertKindToViewId:function(e){return a[e]||"durandal/widgets/"+e+"/view"},beforeBind:function(e,t){var n=s.getParts(e),r=s.getParts(t);for(var i in n)$(r[i]).replaceWith(n[i])},createCompositionSettings:function(e){return e.model||(e.model=this.convertKindToModuleId(e.kind)),e.view||(e.view=this.convertKindToViewId(e.kind)),e.preserveContext=!0,e.beforeBind=this.beforeBind,e},create:function(e,t,r){"string"==typeof t&&(t={kind:t});var i=s.createCompositionSettings(t);n.compose(e,i,r)}};return ko.bindingHandlers.widget={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){var o=s.getSettings(t);s.create(e,o,i)}},ko.virtualElements.allowedBindings.widget=!0,s}),n("durandal/modalDialog",["require","./composition","./system","./viewModel"],function(e){function t(e){return r.defer(function(t){"string"==typeof e?r.acquire(e).then(function(e){"function"==typeof e?t.resolve(new e):t.resolve(e)}):t.resolve(e)}).promise()}var n=e("./composition"),r=e("./system"),i=e("./viewModel"),o={},a=0,s={currentZIndex:1e3,getNextZIndex:function(){return++this.currentZIndex},isModalOpen:function(){return a>0},getContext:function(e){return o[e||"default"]},addContext:function(e,t){t.name=e,o[e]=t;var n="show"+e.substr(0,1).toUpperCase()+e.substr(1);this[n]=function(t,n){return this.show(t,n,e)}},createCompositionSettings:function(e,t){var n={model:e,activate:!1};return t.afterCompose&&(n.afterCompose=t.afterCompose),n},show:function(e,s,c){var l=this,u=o[c||"default"];return r.defer(function(r){t(e).then(function(e){var t=i.activator();t.activateItem(e,s).then(function(i){if(i){var o=e.modal={owner:e,context:u,activator:t,close:function(n){t.deactivateItem(e,!0).then(function(t){t&&(a--,u.removeHost(o),delete e.modal,r.resolve(n))})}};o.settings=l.createCompositionSettings(e,u),u.addHost(o),a++,n.compose(o.host,o.settings)}else r.resolve(!1)})})}).promise()}};return s.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(e){var t=$("body"),n=$('<div class="modalBlockout"></div>').css({"z-index":s.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(t),r=$('<div class="modalHost"></div>').css({"z-index":s.getNextZIndex()}).appendTo(t);if(e.host=r.get(0),e.blockout=n.get(0),!s.isModalOpen()){e.oldBodyMarginRight=$("body").css("margin-right");var i=$("html"),o=t.outerWidth(!0),a=i.scrollTop();$("html").css("overflow-y","hidden");var c=$("body").outerWidth(!0);t.css("margin-right",c-o+parseInt(e.oldBodyMarginRight)+"px"),i.scrollTop(a),$("#simplemodal-overlay").css("width",c+"px")}},removeHost:function(e){if($(e.host).css("opacity",0),$(e.blockout).css("opacity",0),setTimeout(function(){$(e.host).remove(),$(e.blockout).remove()},this.removeDelay),!s.isModalOpen()){var t=$("html"),n=t.scrollTop();t.css("overflow-y","").scrollTop(n),$("body").css("margin-right",e.oldBodyMarginRight)}},afterCompose:function(e,t,n){var r=$(t),i=r.width(),o=r.height();r.css({"margin-top":""+-o/2+"px","margin-left":""+-i/2+"px"}),$(n.model.modal.host).css("opacity",1),$(t).hasClass("autoclose")&&$(n.model.modal.blockout).click(function(){n.model.modal.close()}),$(".autofocus",t).each(function(){$(this).focus()})}}),s}),n("durandal/events",["require","./system"],function(e){var t=e("./system"),n=/\s+/,r=function(){},i=function(e,t){this.owner=e,this.events=t};return i.prototype.then=function(e,t){return this.callback=e||this.callback,this.context=t||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},i.prototype.on=i.prototype.then,i.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},r.prototype.on=function(e,t,r){var o,a,s;if(t){for(o=this.callbacks||(this.callbacks={}),e=e.split(n);a=e.shift();)s=o[a]||(o[a]=[]),s.push(t,r);return this}return new i(this,e)},r.prototype.off=function(e,r,i){var o,a,s,c;if(!(a=this.callbacks))return this;if(!(e||r||i))return delete this.callbacks,this;for(e=e?e.split(n):t.keys(a);o=e.shift();)if((s=a[o])&&(r||i))for(c=s.length-2;c>=0;c-=2)r&&s[c]!==r||i&&s[c+1]!==i||s.splice(c,2);else delete a[o];return this},r.prototype.trigger=function(e){var t,r,i,o,a,s,c,l;if(!(r=this.callbacks))return this;for(l=[],e=e.split(n),o=1,a=arguments.length;a>o;o++)l[o-1]=arguments[o];for(;t=e.shift();){if((c=r.all)&&(c=c.slice()),(i=r[t])&&(i=i.slice()),i)for(o=0,a=i.length;a>o;o+=2)i[o].apply(i[o+1]||this,l);if(c)for(s=[t].concat(l),o=0,a=c.length;a>o;o+=2)c[o].apply(c[o+1]||this,s)}return this},r.prototype.proxy=function(e){var t=this;return function(n){t.trigger(e,n)}},r.includeIn=function(e){e.on=r.prototype.on,e.off=r.prototype.off,e.trigger=r.prototype.trigger,e.proxy=r.prototype.proxy},r}),n("durandal/app",["require","./system","./viewEngine","./composition","./widget","./modalDialog","./events"],function(e){var t,n=e("./system"),r=e("./viewEngine"),i=e("./composition"),o=(e("./widget"),e("./modalDialog")),a=e("./events"),s="Application",c={title:s,showModal:function(e,t,n){return o.show(e,t,n)},showMessage:function(e,n,r){return o.show(new t(e,n,r))},start:function(){var e=this;return e.title&&(document.title=e.title),n.defer(function(r){$(function(){n.log("Starting Application"),n.acquire("./messageBox").then(function(i){t=i,t.defaultTitle=e.title||s,r.resolve(),n.log("Started Application")})})}).promise()},setRoot:function(e,t,n){var o,a={activate:!0,transition:t};o=n&&"string"!=typeof n?n:document.getElementById(n||"applicationHost"),"string"==typeof e?r.isViewUrl(e)?a.view=e:a.model=e:a.model=e,i.compose(o,a)},adaptToDevice:function(){document.body.ontouchmove&&(document.body.ontouchmove=function(e){e.preventDefault()})}};return a.includeIn(c),c}),n("durandal/plugins/router",["require","../system","../viewModel","../app"],function(e){function t(){I=!0,g.log("Cancelling Navigation"),f&&u.setLocation(f),I=!1,k(!1);var e=u.last_location[1].split("#/")[1];f||!e?E():e!=p?window.location.replace("#/"+p):E()}function n(e,t,n){A(e),d.onNavigationComplete(e,t,n),v=n,f=u.last_location[1].replace("/",""),E()}function r(e,r,i){r.routeInfo=e,r.router=d,g.log("Activating Route",e,i,r),T.activateItem(i,r).then(function(o){o?n(e,r,i):t()})}function i(){return I||u.last_location[1].replace("/","")==f}function o(e,t){var n=b[e];if(!i()){if(!n){if(!d.autoConvertRouteToModuleId)return d.handleInvalidRoute(e,t),void 0;n={moduleId:d.autoConvertRouteToModuleId(e,t),name:d.convertRouteToName(e)}}k(!0),g.acquire(n.moduleId).then(function(e){var i=d.getActivatableInstance(n,t,e);r(n,t,i)})}}function a(){o(p,this.params||{})}function s(){o(""+this.app.last_route.path,this.params||{})}function c(){var e,t=this.params||{};if(d.autoConvertRouteToModuleId){var n=this.path.split("#/");if(2==n.length){var r=n[1].split("/");return e=r[0],t.splat=r.splice(1),o(e,t),void 0}}d.handleInvalidRoute(this.app.last_location[1],t)}function l(e){return d.prepareRouteInfo(e),b[e.url]=e,w.push(e),e.visible&&(e.isActive=ko.computed(function(){return x()&&T()&&T().__moduleId__==e.moduleId}),y.push(e)),e}var u,d,f,v,p,g=e("../system"),m=e("../viewModel"),h=e("../app"),b={},w=ko.observableArray([]),y=ko.observableArray([]),x=ko.observable(!1),k=ko.observable(!1),I=!1,T=m.activator(),A=ko.observable(),E=function(){E=g.noop,x(!0),d.dfd.resolve(),delete d.dfd};return T.settings.areSameItem=function(){return!1},d={ready:x,allRoutes:w,visibleRoutes:y,isNavigating:k,activeItem:T,activeRoute:A,afterCompose:function(){setTimeout(function(){k(!1)},10)},getActivatableInstance:function(e,t,n){return"function"==typeof n?new n:n},useConvention:function(e){e=null==e?"viewmodels":e,e&&(e+="/"),d.convertRouteToModuleId=function(t){return e+d.stripParameter(t)}},stripParameter:function(e){var t=e.indexOf(":"),n=t>0?t-1:e.length;return e.substring(0,n)},handleInvalidRoute:function(e,t){g.log("No Route Found",e,t)},onNavigationComplete:function(e){document.title=h.title?e.name+" | "+h.title:e.name},navigateBack:function(){window.history.back()},navigateTo:function(e){u.setLocation(e)},replaceLocation:function(e){window.location.replace(e)},convertRouteToName:function(e){var t=d.stripParameter(e);return t.substring(0,1).toUpperCase()+t.substring(1)},convertRouteToModuleId:function(e){return d.stripParameter(e)},prepareRouteInfo:function(e){e.url instanceof RegExp||(e.name=e.name||d.convertRouteToName(e.url),e.moduleId=e.moduleId||d.convertRouteToModuleId(e.url),e.hash=e.hash||"#/"+e.url),e.caption=e.caption||e.name,e.settings=e.settings||{}},mapAuto:function(e){e=e||"viewmodels",e+="/",d.autoConvertRouteToModuleId=function(t){return e+d.stripParameter(t)}},mapNav:function(e,t,n){return"string"==typeof e?this.mapRoute(e,t,n,!0):(e.visible=!0,l(e))},mapRoute:function(e,t,n,r){return"string"==typeof e?l({url:e,moduleId:t,name:n,visible:r}):l(e)},map:function(e){if(!g.isArray(e))return l(e);for(var t=[],n=0;e.length>n;n++)t.push(l(e[n]));return t},activate:function(e){return g.defer(function(t){var n;d.dfd=t,p=e,u=Sammy(function(e){for(var t=w(),r=0;t.length>r;r++){var i=t[r];e.get(i.url,s),n=this.routes.get[r],b[""+n.path]=i}e.get(/\#\/(.*)/,c),e.get("",a)}),u._checkFormSubmission=function(){return!1},u.log=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("Sammy"),g.log.apply(g,e)},u.run()}).promise()}}}),n("services/logger",["durandal/system"],function(e){function t(e,t,n,i){r(e,t,n,i,"info")}function n(e,t,n,i){r(e,t,n,i,"error")}function r(t,n,r,i,o){r=r?"["+r+"] ":"",n?e.log(r,t,n):e.log(r,t),i&&("error"===o?toastr.error(t):toastr.info(t))}var i={log:t,logError:n};return i}),t.config({paths:{text:"durandal/amd/text"}}),n("main",["durandal/app","durandal/viewLocator","durandal/system","durandal/plugins/router","services/logger"],function(e,t,n,r,i){n.debug(!0),e.title="Trip Data",e.start().then(function(){toastr.options.positionClass="toast-bottom-right",toastr.options.backgroundpositionClass="toast-bottom-right",r.handleInvalidRoute=function(e){i.logError("No Route Found",e,"main",!0)},r.useConvention(),t.useConvention(),e.adaptToDevice(),e.setRoot("viewmodels/shell","entrance")})}),n("durandal/http",[],function(){return{defaultJSONPCallbackParam:"callback",get:function(e,t){return $.ajax(e,{data:t})},jsonp:function(e,t,n){return-1==e.indexOf("=?")&&(n=n||this.defaultJSONPCallbackParam,e+=-1==e.indexOf("?")?"?":"&",e+=n+"=?"),$.ajax({url:e,dataType:"jsonp",data:t})},post:function(e,t){return $.ajax({url:e,data:ko.toJSON(t),type:"POST",contentType:"application/json",dataType:"json"})}}}),n("text",["module"],function(e){var n,r,i=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,s="undefined"!=typeof location&&location.href,c=s&&location.protocol&&location.protocol.replace(/\:/,""),l=s&&location.hostname,u=s&&(location.port||void 0),d=[],f=e.config&&e.config()||{};return n={version:"2.0.3",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=i[t];try{e=new ActiveXObject(n)}catch(r){}if(e){i=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),-1!==n&&(t=i.substring(n+1,i.length),t="strip"===t,i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,r,i){var o,a,s,c=n.xdRegExp.exec(e);return c?(o=c[2],a=c[3],a=a.split(":"),s=a[1],a=a[0],!(o&&o!==t||a&&a.toLowerCase()!==r.toLowerCase()||(s||a)&&s!==i)):!0},finishLoad:function(e,t,r,i){r=t?n.strip(r):r,f.isBuild&&(d[e]=r),i(r)},load:function(e,t,r,i){if(i.isBuild&&!i.inlineText)return r(),void 0;f.isBuild=i.isBuild;var o=n.parseName(e),a=o.moduleName+"."+o.ext,d=t.toUrl(a),v=f.useXhr||n.useXhr;!s||v(d,c,l,u)?n.get(d,function(t){n.finishLoad(e,o.strip,t,r)},function(e){r.error&&r.error(e)}):t([a],function(e){n.finishLoad(o.moduleName+"."+o.ext,o.strip,e,r)})},write:function(e,t,r){if(d.hasOwnProperty(t)){var i=n.jsEscape(d[t]);r.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,t,r,i,o){var a=n.parseName(t),s=a.moduleName+"."+a.ext,c=r.toUrl(a.moduleName+"."+a.ext)+".js";n.load(s,r,function(){var t=function(e){return i(c,e)};t.asModule=function(e,t){return i.asModule(e,c,t)},n.write(e,s,t,o)},o)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(r=t.nodeRequire("fs"),n.get=function(e,t){var n=r.readFileSync(e,"utf8");0===n.indexOf("﻿")&&(n=n.substring(1)),t(n)}):"xhr"===f.env||!f.env&&n.createXhr()?n.get=function(e,t,r){var i=n.createXhr();i.open("GET",e,!0),f.onXhr&&f.onXhr(i,e),i.onreadystatechange=function(){var n,o;4===i.readyState&&(n=i.status,n>399&&600>n?(o=Error(e+" HTTP status: "+n),o.xhr=i,r(o)):t(i.responseText))},i.send(null)}:("rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(n.get=function(e,t){var n,r,i="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),c="";try{for(n=new java.lang.StringBuffer,r=s.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),n.append(r);null!==(r=s.readLine());)n.append(a),n.append(r);c=""+n+""}finally{s.close()}t(c)}),n}),n("text!durandal/messageBox.html",[],function(){return'<div class="messageBox">\r\n    <div class="modal-header">\r\n        <h3 data-bind="html: title"></h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <p class="message" data-bind="html: message"></p>\r\n    </div>\r\n    <div class="modal-footer" data-bind="foreach: options">\r\n        <button class="btn" data-bind="click: function () { $parent.selectOption($data); }, html: $data, css: { \'btn-primary\': $index() == 0, autofocus: $index() == 0 }"></button>\r\n    </div>\r\n</div>'}),n("durandal/messageBox",[],function(){var e=function(t,n,r){this.message=t,this.title=n||e.defaultTitle,this.options=r||e.defaultOptions
};return e.prototype.selectOption=function(e){this.modal.close(e)},e.defaultTitle="",e.defaultOptions=["Ok"],e}),n("durandal/transitions/entrance",["require","../system"],function(e){var t=e("../system"),n=100,r=function(e,r,i){return t.defer(function(t){function o(){t.resolve()}function a(){i.cacheViews?i.composingNewView&&ko.virtualElements.prepend(e,r):(ko.virtualElements.emptyNode(e),ko.virtualElements.prepend(e,r));var t={marginLeft:"20px",marginRight:"-20px",opacity:0,display:"block"},n={marginRight:0,marginLeft:0,opacity:1};$(r).css(t),$(r).animate(n,c,"swing",o)}if(i.keepScrollPosition||$(document).scrollTop(0),r){var s=$(i.activeView),c=i.duration||500;s.length?s.fadeOut(n,a):a()}else i.activeView?$(i.activeView).fadeOut(n,function(){i.cacheViews||ko.virtualElements.emptyNode(e),o()}):(i.cacheViews||ko.virtualElements.emptyNode(e),o())}).promise()};return r}),n("services/cookie",[],function(){function e(e){return t()[e]}function t(){var e=document.cookie,t=0,n={};return document.cookie.match(/^\s*\$Version=(?:"1"|1);\s*(.*)/)&&(e=RegExp.$1,t=1),0===t?e.split(/[,;]/).map(function(e){var t=e.split(/=/,2),r=decodeURIComponent(t[0].trimLeft()),i=t.length>1?decodeURIComponent(t[1].trimRight()):null;n[r]=i}):e.match(/(?:^|\s+)([!#$%&'*+\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\-.0-9A-Z^`a-z|~]*|"(?:[\x20-\x7E\x80\xFF]|\\[\x00-\x7F])*")(?=\s*[,;]|$)/g).map(function(e,t){var r=e,i='"'===t.charAt(0)?t.substr(1,-1).replace(/\\(.)/g,"$1"):t;n[r]=i}),n}function n(e,t,n){var r=new Date;r.setDate(r.getDate()+n),document.cookie=e+"="+escape(t)+(null==n?"":";expires="+r.toGMTString())}var r={getCookie:e,setCookie:n};return r}),n("services/authentication",["durandal/system","durandal/app","services/logger","durandal/plugins/router","services/cookie"],function(e,t,n,r,i){function o(e){e&&$(document).ajaxError(function(t,n){401===n.status&&e()})}function a(e,t){var i=$.post("/api/account",e).done(function(i){i.Success===!0?(n.log("login sucess ",null,!0),d(f,e),u(),r.navigateTo(t)):n.log("login no-success",null,!0)}).fail(function(e){n.log("error login! "+e,null,!0)});return i}function s(e,t){var i=$.ajax({url:"/api/account",type:"PUT",data:e,success:function(i){i.Success===!0?(d(f,e),u(),r.navigateTo(t)):n.log("no-success",null,!0)},error:function(e){n.log("error register! "+e,null,!0)}});return i}function c(e,t){var r={Token:i.getCookie("tripdata-accesstoken")};$.ajax({url:"/api/security",type:"POST",data:r,success:function(r){r.Success===!0?(n.log("checkAccess success ",null,!0),e()):(n.log("checkAccess no-success ",null,!0),t())},error:function(e){n.log("checkAccess error! "+e,null,!0),t()}})}function l(){var e={Token:i.getCookie("tripdata-accesstoken")},t=$.ajax({url:"/api/security",type:"DELETE",data:e,success:function(e){e.Success===!0?(u(),r.navigateTo("#/account/login")):r.navigateTo("#/account/login")},error:function(e){n.log("error logout! "+e,null,!0),r.navigateTo("#/account/login")}});return t}function u(){t.trigger("accesstoken:new")}function d(e,t){window.localStorage.setItem(e,t)}var f="userinfo",v={login:a,register:s,logout:l,checkAccess:c,handleUnauthorizedAjaxRequests:o};return v}),n("services/breeze.partial-entities",[],function(){function e(e,n,r,i,o){function a(n){var a=n[i],c=e.getEntityByKey(r,a);return c||(o=$.extend({},o||t),o[i]=a,c=e.createEntity(r,o)),s(c,n),c.entityAspect.setUnchanged(),c}function s(e,t){for(var n in t)t.hasOwnProperty(n)&&e[n](t[n]);return e}return n.map(a)}var t={isPartial:!0},n={mapDtosToEntities:e};return n}),n("services/model",["config","durandal/system","services/logger"],function(e,t,n){function r(){}function i(e){function t(t,r){var i=r;return e.createEntity(t,i,n)}var n=breeze.EntityState.Unchanged;t(l.car),t(l.trip,{startMilage:0,endMilage:0,dateTime:s}),t(l.driver)}function o(e){e.registerEntityTypeCtor("Car",null),e.registerEntityTypeCtor("Trip",null,a),e.registerEntityTypeCtor("Driver",null)}function a(){}var s=new Date(1900,0,1);breeze.Validator;var c={trip:"datetime"},l={car:"Car",trip:"Trip",driver:"Driver"},u={configureMetadataStore:o,entityNames:l,orderBy:c,createNullos:i,applySessionValidators:r};return u}),n("services/datacontext",["durandal/system","durandal/app","services/model","config","services/logger","services/breeze.partial-entities","services/cookie"],function(e,t,n,r,i,o,a){function s(e,t,n){var r=b.from(e).orderBy(t);return n||(r=r.where("id","!=",0)),w.executeQueryLocally(r)}function c(e){var t=e.message;return t.match(/validation error/i)?l(e):t}function l(e){try{return e.entitiesWithErrors.map(function(e){return e.entityAspect.getValidationErrors().map(function(e){return e.errorMessage}).join("; <br/>")}).join("; <br/>")}catch(t){}return"validation error"}function u(e){var t="Error retreiving data. "+e.message;throw h(t,e),e}function d(){breeze.NamingConvention.camelCase.setAsDefault();var e=new breeze.EntityManager(r.remoteServiceName);return n.configureMetadataStore(e.metadataStore),f(),e}function f(){var e=v("__RequestVerificationToken"),t=v("tripdata-accesstoken"),n=breeze.config.getAdapterInstance("ajax");n.defaultSettings={headers:{"X-TripData-AccessToken":t,"X-TripData-RequestVerificationToken":e}}}function v(e){var t=a.getCookie(e);return void 0==t&&(t=""),t}function p(){return b.from("Lookups").using(w).execute().then(g).fail(u)}function g(){n.createNullos(w)}function m(t,n,r){i.log(t,n,e.getModuleId(C),r)}function h(t,n){i.logError(t,n,e.getModuleId(C),!0)}var b=breeze.EntityQuery,w=d(),y=n.entityNames,x=function(e,t){function n(e){var n=e.entity;return t(n)}return w.fetchEntityByKey(y.trip,e,!0).then(n).fail(u)},k=function(){w.rejectChanges(),m("Canceled changes",null,!0)},I=function(){function e(e){m("Saved data successfully",e,!0)}function t(e){var t="Save failed: "+c(e);throw h(t,e),e.message=t,e}return w.saveChanges().then(e).fail(t)},T=function(){var e=w.createEntity(y.trip);return w.addEntity(e),e},A=function(){function e(){C.lookups={cars:s("Cars","model",!0)},m("Primed data",C.lookups)}function t(){n.applySessionValidators(w.metadataStore)}var r=Q.all([p()]).then(t);return r.then(e)},E=ko.observable(!1);w.hasChangesChanged.subscribe(function(e){E(e.hasChanges)}),t.on("accesstoken:new").then(function(){f()});var C={createTrip:T,hasChanges:E,getTripById:x,cancelChanges:k,saveChanges:I,primeData:A};return C}),$(function(){var e=function(e){var t=e.find(".validation-summary-errors, .validation-summary-valid");return t},t=function(t,n){var r=e(t).removeClass("validation-summary-valid").addClass("validation-summary-errors"),i=$.map(n,function(e){return"<li>"+e+"</li>"}).join("");r.find("ul").empty().append(i)},n=function(e){var n=$(this);(!n.valid||n.valid())&&$.post(n.attr("action"),n.serializeArray()).done(function(e){e=e||{},e.success?window.location=e.redirect||location.href:e.errors&&t(n,e.errors)}).error(function(){t(n,["An unknown error happened."])}),e.preventDefault()};$("#showRegister").click(function(){$("#loginPanel").hide("slide",function(){$("#registerPanel").show("slide",function(){$("#registerName").focus()})})}),$("#showLogin").click(function(){$("#registerPanel").hide("slide",function(){$("#loginPanel").show("slide",function(){$("#loginName").focus()})})}),$("#loginForm").submit(n),$("#registerForm").submit(n)}),n("viewmodels/ajaxlogin",function(){}),n("viewmodels/details",["services/logger"],function(e){function t(){return e.log("Details Activated",null,"details",!0),!0}var n={activate:t,title:"Details"};return n}),n("viewmodels/home",["services/logger"],function(e){function t(){return e.log("Home Activated",null,"home",!0),!0}var n={activate:t,title:"Home"};return n}),n("viewmodels/settings",["services/logger"],function(e){function t(){return e.log("Settings Activated",null,"settings",!0),!0}var n={activate:t,title:"Settings",settings:{}};return n}),n("viewmodels/shell",["durandal/system","durandal/plugins/router","services/datacontext","services/logger","services/authentication","config"],function(e,t,n,r,i,o){function a(){return n.primeData().then(c).then(s).fail(l)}function s(){return u("checkAccess executed!",null,!0),i.checkAccess(function(){return t.activate("trip")},function(){return t.activate("account/login")})}function c(){t.map(o.routes),u("Trip Data Loaded!",null,!0)}function l(){u("Could not load app",null,!0)}function u(t,n,i){r.log(t,n,e.getModuleId(d),i)}var d={activate:a,router:t};return d}),n("viewmodels/trip",["services/logger","services/datacontext","durandal/plugins/router"],function(e,t,n){var r=ko.observable(!1),i=ko.observable(),o=function(){return i(t.createTrip()),e.log("Trip Activated",null,"trip",!0),!0},a=function(){n.navigateBack()},s=ko.computed(function(){return t.hasChanges()}),c=ko.computed(function(){return s()&&!r()}),l=function(){function e(){n.replaceLocation("#/trip/"+i().id())}function o(){r(!1)}r(!0),t.saveChanges().then(e).fin(o)},u={activate:o,canSave:c,cancel:a,hasChanges:s,trip:i,save:l,title:"Trip"};return u}),n("viewmodels/account/login",["services/logger","services/authentication"],function(e,t){function n(){var e={Email:this.email(),Password:this.password()};t.login(e,"#/home"),this.password("")}function r(){return e.log("Login Activated",null,"login",!0),!0}var i={activate:r,title:"Login",email:ko.observable(),password:ko.observable(),rememberme:ko.observable(),login:n};return i}),n("viewmodels/account/register",["services/logger","services/authentication"],function(e,t){function n(){if(i.password()===i.password2()){var e={Email:this.email(),Password:this.password()};t.register(e,"#/home"),this.password("")}else alert("Passwords do not match")}function r(){return e.log("Register Activated",null,"register",!0),!0}var i={activate:r,title:"Register",email:ko.observable(),password:ko.observable(),password2:ko.observable(),register:n};return i}),n("text!views/details.html",[],function(){return'<section>\r\n    <h2 class="page-title" data-bind="text: title"></h2>\r\n</section>'}),n("text!views/footer.html",[],function(){return'<nav class="navbar navbar-fixed-bottom">\r\n    <div class="navbar-inner navbar-content-center">\r\n        <span class="pull-left"><a href="http://www.henrycordes.nl" target="_blank">Trip Data</a></span>\r\n        <span class="pull-right"><a href="http://www.henrycordes.nl" target="_blank"> © 2013 henrycordes.nl</a></span>\r\n    </div>\r\n</nav>\r\n'}),n("text!views/home.html",[],function(){return'<section>\r\n    <h2 class="page-title" data-bind="text: title"></h2>\r\n</section>'}),n("text!views/nav.html",[],function(){return'<div class="navbar navbar-fixed-top">\r\n    <div class="navbar-inner">\r\n        <div class="container-fluid">\r\n            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n            </a>\r\n            <a class="brand" href="/" name="top"><span class="title">Trip Data</span> </a>\r\n            <div class="nav-collapse collapse">\r\n                <ul class="nav" data-bind="foreach: router.visibleRoutes ">\r\n                    <li data-bind="css: { active: isActive }">\r\n                        <a  data-bind="attr: { href: hash }, text: name" ></a>\r\n                    </li>\r\n                    <li class="divider-vertical"></li>\r\n                </ul>\r\n            </div>\r\n            <!--/.nav-collapse -->\r\n        </div>\r\n        <!--/.container-fluid -->\r\n    </div>\r\n    <!--/.navbar-inner -->\r\n</div>\r\n<!--/.navbar -->\r\n <div class="btn-group top-right pull-right">\r\n    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">\r\n        <i class="icon-user"></i> admin	<span class="caret"></span>\r\n    </a>\r\n    <ul class="dropdown-menu">\r\n        <li><a href="#/settings"><i class="icon-wrench"></i> Settings</a></li>\r\n        <li class="divider"></li>\r\n        <li><a href="#/account/login"><i class="icon-share"></i> Logout</a></li>\r\n    </ul>\r\n </div>'}),n("text!views/settings.html",[],function(){return'<section>\r\n    \r\n    <h2 class="page-title" data-bind="text: title"></h2>\r\n    \r\n    <fieldset id="settings">\r\n        \r\n        <legend>Driver</legend>\r\n\r\n        <form class="form-horizontal">\r\n            <div class="control-group">\r\n                <label class="control-label" for="LastName">Lastname</label>\r\n                <div class="controls">\r\n                    <input type="text" id="LastName" placeholder="Lastname" data-bind="text: LastName">\r\n                </div>\r\n            </div>\r\n            <div class="control-group">\r\n                <label class="control-label" for="FirstName">Firstname</label>\r\n                <div class="controls">\r\n                    <input type="text" id="FirstName" placeholder="Firstname" data-bind="text: FirstName">\r\n                </div>\r\n            </div>\r\n            <div class="control-group">\r\n                <label class="control-label" for="Email">Email</label>\r\n                <div class="controls">\r\n                    <input type="text" id="Email" placeholder="Email" data-bind="text: Email">\r\n                </div>\r\n            </div>\r\n            <div class="control-group">\r\n                <label class="control-label" for="Password">Password</label>\r\n                <div class="controls">\r\n                    <input type="password" id="Password" placeholder="Password">\r\n                </div>\r\n            </div>\r\n            <div class="control-group">\r\n                <label class="control-label" for="VerifyPassword">Verify password</label>\r\n                <div class="controls">\r\n                    <input type="password" id="VerifyPassword" placeholder="Password">\r\n                </div>\r\n            </div>\r\n            <div class="control-group">\r\n                <div class="controls">\r\n                    <button type="submit" class="btn" data-bind="click: save">Save</button>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </fieldset>\r\n\r\n</section>'}),n("text!views/shell.html",[],function(){return"<div>\r\n    <header>\r\n        <!--ko compose: {view: 'nav'} --><!--/ko-->\r\n    </header>\r\n     <section id=\"content\" class=\"main container-fluid\">\r\n        <!--ko compose: {model: router.activeItem, \r\n            afterCompose: router.afterCompose, \r\n            transition: 'entrance'} -->\r\n        <!--/ko-->\r\n    </section>\r\n    <footer>\r\n        <!--ko compose: {view: 'footer'} --><!--/ko-->\r\n    </footer>\r\n</div>\r\n"}),n("text!views/trip.html",[],function(){return'<section>\r\n    \r\n    <h2 class="page-title" data-bind="text: title"></h2>\r\n    \r\n    <fieldset id="trip">\r\n        \r\n        <legend>Trip</legend>\r\n\r\n        <form class="form-horizontal" >\r\n            <div data-bind="with: trip">\r\n                <div class="control-group">\r\n                    <label class="control-label" for="StartMilage">StartMilage</label>\r\n                    <div class="controls">\r\n                        <input type="text" id="StartMilage" placeholder="Start milage" data-bind="value: startMilage" />\r\n                    </div>\r\n                </div>\r\n                <div class="control-group">\r\n                    <label class="control-label" for="EndMilage">EndMilage</label>\r\n                    <div class="controls">\r\n                        <input type="text" id="EndMilage" placeholder="End milage" data-bind="value: endMilage" />\r\n                    </div>\r\n                </div>\r\n                <div class="control-group">\r\n                    <label class="control-label" for="PlaceOfDeparture">PlaceOfDeparture</label>\r\n                    <div class="controls">\r\n                        <input type="text" id="PlaceOfDeparture" placeholder="Place of departure" data-bind="value: placeOfDeparture" />\r\n                    </div>\r\n                </div>\r\n                <div class="control-group">\r\n                    <label class="control-label" for="Destination">Destination</label>\r\n                    <div class="controls">\r\n                        <input type="text" id="Destination" placeholder="Destination" data-bind="value: destination" />\r\n                    </div>\r\n                </div>\r\n                <div class="control-group">\r\n                    <label class="control-label" for="Description">Description</label>\r\n                    <div class="controls">\r\n                        <input type="text" id="Description" placeholder="Description" data-bind="value: description" />\r\n                    </div>\r\n                </div>\r\n            <!-- <div class="control-group">\r\n                     <label class="control-label" for="TripType">Trip type</label>\r\n                     <div class="controls">\r\n                         <select id="TripType" data-bind="options: tripTypes, optionsText: \'TripType\', value: selectedTripType, optionsCaption: \'Choose...\'"></select>\r\n                     </div>\r\n                 </div>-->\r\n            </div>\r\n            <div class="control-group">\r\n                <div class="controls">\r\n                    <button type="submit" class="btn" data-bind="click: save">Save</button>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </fieldset>\r\n\r\n</section>'}),n("text!views/account/login.html",[],function(){return'<section id="login-section">\r\n    <fieldset id="login">\r\n        <div data-bind="text: title" class="header"></div>\r\n        <form class="form-horizontal"> \r\n            <div class="control-group">\r\n                <label class="control-label" for="Email">Email</label>\r\n                <div class="controls">\r\n                    <input type="text" id="Email" placeholder="Email" data-bind="value: email" />\r\n                </div>\r\n            </div>\r\n      \r\n            <div class="control-group">\r\n                <label class="control-label" for="Password">Password</label>\r\n                <div class="controls">\r\n                    <input type="password" id="Password" placeholder="Password" data-bind="value: password" />\r\n                </div>\r\n            </div>\r\n        \r\n            <div class="control-group">\r\n                <div class="controls">\r\n                    <input type="checkbox" id="rememberme" value="rememberme"/>\r\n                    <label class="checkbox-label" for="rememberme" class="checkbox" >Remember me</label>\r\n                </div>\r\n            </div>\r\n        \r\n            <div class="control-group">\r\n                <div class="controls">\r\n                    <button type="submit" class="btn" data-bind="click: login">Login</button>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </fieldset>\r\n    <div class="centered teaser">\r\n        No Trip Data account? <a href="#/account/register" >Create an account</a>\r\n    </div>\r\n</section>\r\n'}),n("text!views/account/register.html",[],function(){return'<section id="register-section" style="display:none;">\r\n    <fieldset id="register">\r\n        <div data-bind="text: title" class="header"></div>\r\n        <form class="form-horizontal"> \r\n            <div class="control-group">\r\n                <label class="control-label" for="RegisterEmail">Email</label>\r\n                <div class="controls">\r\n                    <input type="text" id="RegisterEmail" placeholder="Email" data-bind="value: email" />\r\n                </div>\r\n            </div>\r\n      \r\n            <div class="control-group">\r\n                <label class="control-label" for="RegisterPassword">Password</label>\r\n                <div class="controls">\r\n                    <input type="password" id="RegisterPassword" placeholder="Password" data-bind="value: password" />\r\n                </div>\r\n            </div>\r\n            <div class="control-group">\r\n                <label class="control-label" for="RegisterPasswordConfirm">Password confirmation</label>\r\n                <div class="controls">\r\n                    <input type="password" id="RegisterPasswordConfirm" placeholder="Password" data-bind="value: password2" />\r\n                </div>\r\n            </div>\r\n  \r\n            <div class="control-group">\r\n                <div class="controls">\r\n                    <button type="submit" class="btn" id="register-button" data-bind="click: register">Register</button>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </fieldset>\r\n    <div class="centered teaser">\r\n        Already have a Trip Data account? <a href="#/account/login">Login</a>\r\n    </div>\r\n</section>'}),t(["main"])})();